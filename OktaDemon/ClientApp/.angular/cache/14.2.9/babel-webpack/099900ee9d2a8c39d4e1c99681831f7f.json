{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Narean/source/repos/OktaDemon/OktaDemon/ClientApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n\n/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * \n * See the License for the specific language governing permissions and limitations under the License.\n */\nimport { __rest } from '../../../_virtual/_tslib.js';\nimport { Remediator } from '../Base/Remediator.js';\nimport { unwrapFormValue } from './util.js';\n\nclass GenericRemediator extends Remediator {\n  canRemediate() {\n    if (typeof this.remediation.action !== 'function') {\n      return false;\n    }\n\n    if (this.remediation.name === 'poll' || this.remediation.name.endsWith('-poll')) {\n      return true;\n    }\n\n    if (this.options.step) {\n      return true;\n    }\n\n    return false;\n  }\n\n  getData() {\n    const data = this.getInputs().reduce((acc, {\n      name\n    }) => {\n      acc[name] = this.values[name];\n      return acc;\n    }, {});\n    return data;\n  }\n\n  getNextStep(authClient, _context) {\n    const name = this.getName();\n    const inputs = this.getInputs();\n\n    const _a = this.remediation,\n          {\n      href,\n      method,\n      rel,\n      accepts,\n      produces,\n      value,\n      action\n    } = _a,\n          rest = __rest(_a, [\"href\", \"method\", \"rel\", \"accepts\", \"produces\", \"value\", \"action\"]);\n\n    if (action) {\n      return Object.assign(Object.assign(Object.assign({}, rest), !!inputs.length && {\n        inputs\n      }), {\n        action: function () {\n          var _ref = _asyncToGenerator(function* (params) {\n            return authClient.idx.proceed(Object.assign({\n              step: name\n            }, params));\n          });\n\n          return function action(_x) {\n            return _ref.apply(this, arguments);\n          };\n        }()\n      });\n    }\n\n    return Object.assign({}, this.remediation);\n  }\n\n  getInputs() {\n    return (this.remediation.value || []).filter(({\n      name\n    }) => name !== 'stateHandle').map(unwrapFormValue).map(input => {\n      input.type = input.type || 'string';\n      return input;\n    });\n  }\n\n}\n\nexport { GenericRemediator };","map":{"version":3,"names":["__rest","Remediator","unwrapFormValue","GenericRemediator","canRemediate","remediation","action","name","endsWith","options","step","getData","data","getInputs","reduce","acc","values","getNextStep","authClient","_context","getName","inputs","_a","href","method","rel","accepts","produces","value","rest","Object","assign","length","params","idx","proceed","filter","map","input","type"],"sources":["C:/Users/Narean/source/repos/OktaDemon/OktaDemon/ClientApp/node_modules/@okta/okta-auth-js/esm/browser/idx/remediators/GenericRemediator/GenericRemediator.js"],"sourcesContent":["/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * \n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport { __rest } from '../../../_virtual/_tslib.js';\nimport { Remediator } from '../Base/Remediator.js';\nimport { unwrapFormValue } from './util.js';\n\nclass GenericRemediator extends Remediator {\n    canRemediate() {\n        if (typeof this.remediation.action !== 'function') {\n            return false;\n        }\n        if (this.remediation.name === 'poll' || this.remediation.name.endsWith('-poll')) {\n            return true;\n        }\n        if (this.options.step) {\n            return true;\n        }\n        return false;\n    }\n    getData() {\n        const data = this.getInputs().reduce((acc, { name }) => {\n            acc[name] = this.values[name];\n            return acc;\n        }, {});\n        return data;\n    }\n    getNextStep(authClient, _context) {\n        const name = this.getName();\n        const inputs = this.getInputs();\n        const _a = this.remediation, {\n        href, method, rel, accepts, produces,\n        value,\n        action } = _a, rest = __rest(_a, [\"href\", \"method\", \"rel\", \"accepts\", \"produces\", \"value\", \"action\"]);\n        if (action) {\n            return Object.assign(Object.assign(Object.assign({}, rest), (!!inputs.length && { inputs })), { action: async (params) => {\n                    return authClient.idx.proceed(Object.assign({ step: name }, params));\n                } });\n        }\n        return Object.assign({}, this.remediation);\n    }\n    getInputs() {\n        return (this.remediation.value || [])\n            .filter(({ name }) => name !== 'stateHandle')\n            .map(unwrapFormValue)\n            .map(input => {\n            input.type = input.type || 'string';\n            return input;\n        });\n    }\n}\n\nexport { GenericRemediator };\n"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,SAASA,MAAT,QAAuB,6BAAvB;AACA,SAASC,UAAT,QAA2B,uBAA3B;AACA,SAASC,eAAT,QAAgC,WAAhC;;AAEA,MAAMC,iBAAN,SAAgCF,UAAhC,CAA2C;EACvCG,YAAY,GAAG;IACX,IAAI,OAAO,KAAKC,WAAL,CAAiBC,MAAxB,KAAmC,UAAvC,EAAmD;MAC/C,OAAO,KAAP;IACH;;IACD,IAAI,KAAKD,WAAL,CAAiBE,IAAjB,KAA0B,MAA1B,IAAoC,KAAKF,WAAL,CAAiBE,IAAjB,CAAsBC,QAAtB,CAA+B,OAA/B,CAAxC,EAAiF;MAC7E,OAAO,IAAP;IACH;;IACD,IAAI,KAAKC,OAAL,CAAaC,IAAjB,EAAuB;MACnB,OAAO,IAAP;IACH;;IACD,OAAO,KAAP;EACH;;EACDC,OAAO,GAAG;IACN,MAAMC,IAAI,GAAG,KAAKC,SAAL,GAAiBC,MAAjB,CAAwB,CAACC,GAAD,EAAM;MAAER;IAAF,CAAN,KAAmB;MACpDQ,GAAG,CAACR,IAAD,CAAH,GAAY,KAAKS,MAAL,CAAYT,IAAZ,CAAZ;MACA,OAAOQ,GAAP;IACH,CAHY,EAGV,EAHU,CAAb;IAIA,OAAOH,IAAP;EACH;;EACDK,WAAW,CAACC,UAAD,EAAaC,QAAb,EAAuB;IAC9B,MAAMZ,IAAI,GAAG,KAAKa,OAAL,EAAb;IACA,MAAMC,MAAM,GAAG,KAAKR,SAAL,EAAf;;IACA,MAAMS,EAAE,GAAG,KAAKjB,WAAhB;IAAA,MAA6B;MAC7BkB,IAD6B;MACvBC,MADuB;MACfC,GADe;MACVC,OADU;MACDC,QADC;MAE7BC,KAF6B;MAG7BtB;IAH6B,IAGlBgB,EAHX;IAAA,MAGeO,IAAI,GAAG7B,MAAM,CAACsB,EAAD,EAAK,CAAC,MAAD,EAAS,QAAT,EAAmB,KAAnB,EAA0B,SAA1B,EAAqC,UAArC,EAAiD,OAAjD,EAA0D,QAA1D,CAAL,CAH5B;;IAIA,IAAIhB,MAAJ,EAAY;MACR,OAAOwB,MAAM,CAACC,MAAP,CAAcD,MAAM,CAACC,MAAP,CAAcD,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBF,IAAlB,CAAd,EAAwC,CAAC,CAACR,MAAM,CAACW,MAAT,IAAmB;QAAEX;MAAF,CAA3D,CAAd,EAAuF;QAAEf,MAAM;UAAA,6BAAE,WAAO2B,MAAP,EAAkB;YAClH,OAAOf,UAAU,CAACgB,GAAX,CAAeC,OAAf,CAAuBL,MAAM,CAACC,MAAP,CAAc;cAAErB,IAAI,EAAEH;YAAR,CAAd,EAA8B0B,MAA9B,CAAvB,CAAP;UACH,CAFiG;;UAAA;YAAA;UAAA;QAAA;MAAR,CAAvF,CAAP;IAGH;;IACD,OAAOH,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB,KAAK1B,WAAvB,CAAP;EACH;;EACDQ,SAAS,GAAG;IACR,OAAO,CAAC,KAAKR,WAAL,CAAiBuB,KAAjB,IAA0B,EAA3B,EACFQ,MADE,CACK,CAAC;MAAE7B;IAAF,CAAD,KAAcA,IAAI,KAAK,aAD5B,EAEF8B,GAFE,CAEEnC,eAFF,EAGFmC,GAHE,CAGEC,KAAK,IAAI;MACdA,KAAK,CAACC,IAAN,GAAaD,KAAK,CAACC,IAAN,IAAc,QAA3B;MACA,OAAOD,KAAP;IACH,CANM,CAAP;EAOH;;AA1CsC;;AA6C3C,SAASnC,iBAAT"},"metadata":{},"sourceType":"module"}