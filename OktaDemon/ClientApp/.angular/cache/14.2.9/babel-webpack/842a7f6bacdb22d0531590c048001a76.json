{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Narean/source/repos/OktaDemon/OktaDemon/ClientApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n\n/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * \n * See the License for the specific language governing permissions and limitations under the License.\n */\nimport { getSavedTransactionMeta, createTransactionMeta, saveTransactionMeta } from './transactionMeta.js';\nimport { removeNils } from '../util/object.js';\nimport { getOAuthBaseUrl } from '../oidc/util/oauth.js';\nimport { httpRequest } from '../http/request.js';\nimport 'tiny-emitter';\nimport 'js-cookie';\nimport 'cross-fetch';\n\nfunction getResponse(meta) {\n  return {\n    meta,\n    interactionHandle: meta.interactionHandle,\n    state: meta.state\n  };\n}\n\nfunction interact(_x) {\n  return _interact.apply(this, arguments);\n}\n\nfunction _interact() {\n  _interact = _asyncToGenerator(function* (authClient, options = {}) {\n    options = removeNils(options);\n    let meta = getSavedTransactionMeta(authClient, options);\n\n    if (meta === null || meta === void 0 ? void 0 : meta.interactionHandle) {\n      return getResponse(meta);\n    }\n\n    meta = yield createTransactionMeta(authClient, Object.assign(Object.assign({}, meta), options));\n    const baseUrl = getOAuthBaseUrl(authClient);\n    let {\n      clientId,\n      redirectUri,\n      state,\n      scopes,\n      withCredentials,\n      codeChallenge,\n      codeChallengeMethod,\n      activationToken,\n      recoveryToken,\n      maxAge,\n      nonce\n    } = meta;\n    const clientSecret = options.clientSecret || authClient.options.clientSecret;\n    withCredentials = withCredentials !== null && withCredentials !== void 0 ? withCredentials : true;\n    const url = `${baseUrl}/v1/interact`;\n    const params = Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({\n      client_id: clientId,\n      scope: scopes.join(' '),\n      redirect_uri: redirectUri,\n      code_challenge: codeChallenge,\n      code_challenge_method: codeChallengeMethod,\n      state\n    }, activationToken && {\n      activation_token: activationToken\n    }), recoveryToken && {\n      recovery_token: recoveryToken\n    }), clientSecret && {\n      client_secret: clientSecret\n    }), maxAge && {\n      max_age: maxAge\n    }), nonce && {\n      nonce\n    });\n    const headers = {\n      'Content-Type': 'application/x-www-form-urlencoded'\n    };\n    const resp = yield httpRequest(authClient, {\n      method: 'POST',\n      url,\n      headers,\n      withCredentials,\n      args: params\n    });\n    const interactionHandle = resp.interaction_handle;\n    const newMeta = Object.assign(Object.assign({}, meta), {\n      interactionHandle,\n      withCredentials,\n      state,\n      scopes,\n      recoveryToken,\n      activationToken\n    });\n    saveTransactionMeta(authClient, newMeta);\n    return getResponse(newMeta);\n  });\n  return _interact.apply(this, arguments);\n}\n\nexport { interact };","map":{"version":3,"names":["getSavedTransactionMeta","createTransactionMeta","saveTransactionMeta","removeNils","getOAuthBaseUrl","httpRequest","getResponse","meta","interactionHandle","state","interact","authClient","options","Object","assign","baseUrl","clientId","redirectUri","scopes","withCredentials","codeChallenge","codeChallengeMethod","activationToken","recoveryToken","maxAge","nonce","clientSecret","url","params","client_id","scope","join","redirect_uri","code_challenge","code_challenge_method","activation_token","recovery_token","client_secret","max_age","headers","resp","method","args","interaction_handle","newMeta"],"sources":["C:/Users/Narean/source/repos/OktaDemon/OktaDemon/ClientApp/node_modules/@okta/okta-auth-js/esm/browser/idx/interact.js"],"sourcesContent":["/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * \n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport { getSavedTransactionMeta, createTransactionMeta, saveTransactionMeta } from './transactionMeta.js';\nimport { removeNils } from '../util/object.js';\nimport { getOAuthBaseUrl } from '../oidc/util/oauth.js';\nimport { httpRequest } from '../http/request.js';\nimport 'tiny-emitter';\nimport 'js-cookie';\nimport 'cross-fetch';\n\nfunction getResponse(meta) {\n    return {\n        meta,\n        interactionHandle: meta.interactionHandle,\n        state: meta.state\n    };\n}\nasync function interact(authClient, options = {}) {\n    options = removeNils(options);\n    let meta = getSavedTransactionMeta(authClient, options);\n    if (meta === null || meta === void 0 ? void 0 : meta.interactionHandle) {\n        return getResponse(meta);\n    }\n    meta = await createTransactionMeta(authClient, Object.assign(Object.assign({}, meta), options));\n    const baseUrl = getOAuthBaseUrl(authClient);\n    let { clientId, redirectUri, state, scopes, withCredentials, codeChallenge, codeChallengeMethod, activationToken, recoveryToken, maxAge, nonce } = meta;\n    const clientSecret = options.clientSecret || authClient.options.clientSecret;\n    withCredentials = withCredentials !== null && withCredentials !== void 0 ? withCredentials : true;\n    const url = `${baseUrl}/v1/interact`;\n    const params = Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({ client_id: clientId, scope: scopes.join(' '), redirect_uri: redirectUri, code_challenge: codeChallenge, code_challenge_method: codeChallengeMethod, state }, (activationToken && { activation_token: activationToken })), (recoveryToken && { recovery_token: recoveryToken })), (clientSecret && { client_secret: clientSecret })), (maxAge && { max_age: maxAge })), (nonce && { nonce }));\n    const headers = {\n        'Content-Type': 'application/x-www-form-urlencoded',\n    };\n    const resp = await httpRequest(authClient, {\n        method: 'POST',\n        url,\n        headers,\n        withCredentials,\n        args: params\n    });\n    const interactionHandle = resp.interaction_handle;\n    const newMeta = Object.assign(Object.assign({}, meta), { interactionHandle,\n        withCredentials,\n        state,\n        scopes,\n        recoveryToken,\n        activationToken });\n    saveTransactionMeta(authClient, newMeta);\n    return getResponse(newMeta);\n}\n\nexport { interact };\n"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,SAASA,uBAAT,EAAkCC,qBAAlC,EAAyDC,mBAAzD,QAAoF,sBAApF;AACA,SAASC,UAAT,QAA2B,mBAA3B;AACA,SAASC,eAAT,QAAgC,uBAAhC;AACA,SAASC,WAAT,QAA4B,oBAA5B;AACA,OAAO,cAAP;AACA,OAAO,WAAP;AACA,OAAO,aAAP;;AAEA,SAASC,WAAT,CAAqBC,IAArB,EAA2B;EACvB,OAAO;IACHA,IADG;IAEHC,iBAAiB,EAAED,IAAI,CAACC,iBAFrB;IAGHC,KAAK,EAAEF,IAAI,CAACE;EAHT,CAAP;AAKH;;SACcC,Q;;;;;gCAAf,WAAwBC,UAAxB,EAAoCC,OAAO,GAAG,EAA9C,EAAkD;IAC9CA,OAAO,GAAGT,UAAU,CAACS,OAAD,CAApB;IACA,IAAIL,IAAI,GAAGP,uBAAuB,CAACW,UAAD,EAAaC,OAAb,CAAlC;;IACA,IAAIL,IAAI,KAAK,IAAT,IAAiBA,IAAI,KAAK,KAAK,CAA/B,GAAmC,KAAK,CAAxC,GAA4CA,IAAI,CAACC,iBAArD,EAAwE;MACpE,OAAOF,WAAW,CAACC,IAAD,CAAlB;IACH;;IACDA,IAAI,SAASN,qBAAqB,CAACU,UAAD,EAAaE,MAAM,CAACC,MAAP,CAAcD,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBP,IAAlB,CAAd,EAAuCK,OAAvC,CAAb,CAAlC;IACA,MAAMG,OAAO,GAAGX,eAAe,CAACO,UAAD,CAA/B;IACA,IAAI;MAAEK,QAAF;MAAYC,WAAZ;MAAyBR,KAAzB;MAAgCS,MAAhC;MAAwCC,eAAxC;MAAyDC,aAAzD;MAAwEC,mBAAxE;MAA6FC,eAA7F;MAA8GC,aAA9G;MAA6HC,MAA7H;MAAqIC;IAArI,IAA+IlB,IAAnJ;IACA,MAAMmB,YAAY,GAAGd,OAAO,CAACc,YAAR,IAAwBf,UAAU,CAACC,OAAX,CAAmBc,YAAhE;IACAP,eAAe,GAAGA,eAAe,KAAK,IAApB,IAA4BA,eAAe,KAAK,KAAK,CAArD,GAAyDA,eAAzD,GAA2E,IAA7F;IACA,MAAMQ,GAAG,GAAI,GAAEZ,OAAQ,cAAvB;IACA,MAAMa,MAAM,GAAGf,MAAM,CAACC,MAAP,CAAcD,MAAM,CAACC,MAAP,CAAcD,MAAM,CAACC,MAAP,CAAcD,MAAM,CAACC,MAAP,CAAcD,MAAM,CAACC,MAAP,CAAc;MAAEe,SAAS,EAAEb,QAAb;MAAuBc,KAAK,EAAEZ,MAAM,CAACa,IAAP,CAAY,GAAZ,CAA9B;MAAgDC,YAAY,EAAEf,WAA9D;MAA2EgB,cAAc,EAAEb,aAA3F;MAA0Gc,qBAAqB,EAAEb,mBAAjI;MAAsJZ;IAAtJ,CAAd,EAA8Ka,eAAe,IAAI;MAAEa,gBAAgB,EAAEb;IAApB,CAAjM,CAAd,EAAyPC,aAAa,IAAI;MAAEa,cAAc,EAAEb;IAAlB,CAA1Q,CAAd,EAA8TG,YAAY,IAAI;MAAEW,aAAa,EAAEX;IAAjB,CAA9U,CAAd,EAAgYF,MAAM,IAAI;MAAEc,OAAO,EAAEd;IAAX,CAA1Y,CAAd,EAAgbC,KAAK,IAAI;MAAEA;IAAF,CAAzb,CAAf;IACA,MAAMc,OAAO,GAAG;MACZ,gBAAgB;IADJ,CAAhB;IAGA,MAAMC,IAAI,SAASnC,WAAW,CAACM,UAAD,EAAa;MACvC8B,MAAM,EAAE,MAD+B;MAEvCd,GAFuC;MAGvCY,OAHuC;MAIvCpB,eAJuC;MAKvCuB,IAAI,EAAEd;IALiC,CAAb,CAA9B;IAOA,MAAMpB,iBAAiB,GAAGgC,IAAI,CAACG,kBAA/B;IACA,MAAMC,OAAO,GAAG/B,MAAM,CAACC,MAAP,CAAcD,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBP,IAAlB,CAAd,EAAuC;MAAEC,iBAAF;MACnDW,eADmD;MAEnDV,KAFmD;MAGnDS,MAHmD;MAInDK,aAJmD;MAKnDD;IALmD,CAAvC,CAAhB;IAMApB,mBAAmB,CAACS,UAAD,EAAaiC,OAAb,CAAnB;IACA,OAAOtC,WAAW,CAACsC,OAAD,CAAlB;EACH,C;;;;AAED,SAASlC,QAAT"},"metadata":{},"sourceType":"module"}