{"ast":null,"code":"/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * \n * See the License for the specific language governing permissions and limitations under the License.\n */\nimport { omit, getLink } from '../util/object.js';\nimport { toQueryString } from '../util/url.js';\nimport { get, post, httpRequest } from '../http/request.js';\nimport 'tiny-emitter';\nimport 'js-cookie';\nimport 'cross-fetch';\n\nfunction sessionExists(sdk) {\n  return sdk.session.get().then(function (res) {\n    if (res.status === 'ACTIVE') {\n      return true;\n    }\n\n    return false;\n  }).catch(function () {\n    return false;\n  });\n}\n\nfunction getSession(sdk) {\n  return get(sdk, '/api/v1/sessions/me', {\n    withCredentials: true\n  }).then(function (session) {\n    var res = omit(session, '_links');\n\n    res.refresh = function () {\n      return post(sdk, getLink(session, 'refresh').href, {}, {\n        withCredentials: true\n      });\n    };\n\n    res.user = function () {\n      return get(sdk, getLink(session, 'user').href, {\n        withCredentials: true\n      });\n    };\n\n    return res;\n  }).catch(function () {\n    return {\n      status: 'INACTIVE'\n    };\n  });\n}\n\nfunction closeSession(sdk) {\n  return httpRequest(sdk, {\n    url: sdk.getIssuerOrigin() + '/api/v1/sessions/me',\n    method: 'DELETE',\n    withCredentials: true\n  });\n}\n\nfunction refreshSession(sdk) {\n  return post(sdk, '/api/v1/sessions/me/lifecycle/refresh', {}, {\n    withCredentials: true\n  });\n}\n\nfunction setCookieAndRedirect(sdk, sessionToken, redirectUrl) {\n  redirectUrl = redirectUrl || window.location.href;\n  window.location.assign(sdk.getIssuerOrigin() + '/login/sessionCookieRedirect' + toQueryString({\n    checkAccountSetupComplete: true,\n    token: sessionToken,\n    redirectUrl: redirectUrl\n  }));\n}\n\nexport { closeSession, getSession, refreshSession, sessionExists, setCookieAndRedirect };","map":{"version":3,"names":["omit","getLink","toQueryString","get","post","httpRequest","sessionExists","sdk","session","then","res","status","catch","getSession","withCredentials","refresh","href","user","closeSession","url","getIssuerOrigin","method","refreshSession","setCookieAndRedirect","sessionToken","redirectUrl","window","location","assign","checkAccountSetupComplete","token"],"sources":["C:/Users/Narean/source/repos/OktaDemon/OktaDemon/ClientApp/node_modules/@okta/okta-auth-js/esm/browser/session/api.js"],"sourcesContent":["/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * \n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport { omit, getLink } from '../util/object.js';\nimport { toQueryString } from '../util/url.js';\nimport { get, post, httpRequest } from '../http/request.js';\nimport 'tiny-emitter';\nimport 'js-cookie';\nimport 'cross-fetch';\n\nfunction sessionExists(sdk) {\n    return sdk.session.get()\n        .then(function (res) {\n        if (res.status === 'ACTIVE') {\n            return true;\n        }\n        return false;\n    })\n        .catch(function () {\n        return false;\n    });\n}\nfunction getSession(sdk) {\n    return get(sdk, '/api/v1/sessions/me', { withCredentials: true })\n        .then(function (session) {\n        var res = omit(session, '_links');\n        res.refresh = function () {\n            return post(sdk, getLink(session, 'refresh').href, {}, { withCredentials: true });\n        };\n        res.user = function () {\n            return get(sdk, getLink(session, 'user').href, { withCredentials: true });\n        };\n        return res;\n    })\n        .catch(function () {\n        return { status: 'INACTIVE' };\n    });\n}\nfunction closeSession(sdk) {\n    return httpRequest(sdk, {\n        url: sdk.getIssuerOrigin() + '/api/v1/sessions/me',\n        method: 'DELETE',\n        withCredentials: true\n    });\n}\nfunction refreshSession(sdk) {\n    return post(sdk, '/api/v1/sessions/me/lifecycle/refresh', {}, { withCredentials: true });\n}\nfunction setCookieAndRedirect(sdk, sessionToken, redirectUrl) {\n    redirectUrl = redirectUrl || window.location.href;\n    window.location.assign(sdk.getIssuerOrigin() + '/login/sessionCookieRedirect' +\n        toQueryString({\n            checkAccountSetupComplete: true,\n            token: sessionToken,\n            redirectUrl: redirectUrl\n        }));\n}\n\nexport { closeSession, getSession, refreshSession, sessionExists, setCookieAndRedirect };\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,SAASA,IAAT,EAAeC,OAAf,QAA8B,mBAA9B;AACA,SAASC,aAAT,QAA8B,gBAA9B;AACA,SAASC,GAAT,EAAcC,IAAd,EAAoBC,WAApB,QAAuC,oBAAvC;AACA,OAAO,cAAP;AACA,OAAO,WAAP;AACA,OAAO,aAAP;;AAEA,SAASC,aAAT,CAAuBC,GAAvB,EAA4B;EACxB,OAAOA,GAAG,CAACC,OAAJ,CAAYL,GAAZ,GACFM,IADE,CACG,UAAUC,GAAV,EAAe;IACrB,IAAIA,GAAG,CAACC,MAAJ,KAAe,QAAnB,EAA6B;MACzB,OAAO,IAAP;IACH;;IACD,OAAO,KAAP;EACH,CANM,EAOFC,KAPE,CAOI,YAAY;IACnB,OAAO,KAAP;EACH,CATM,CAAP;AAUH;;AACD,SAASC,UAAT,CAAoBN,GAApB,EAAyB;EACrB,OAAOJ,GAAG,CAACI,GAAD,EAAM,qBAAN,EAA6B;IAAEO,eAAe,EAAE;EAAnB,CAA7B,CAAH,CACFL,IADE,CACG,UAAUD,OAAV,EAAmB;IACzB,IAAIE,GAAG,GAAGV,IAAI,CAACQ,OAAD,EAAU,QAAV,CAAd;;IACAE,GAAG,CAACK,OAAJ,GAAc,YAAY;MACtB,OAAOX,IAAI,CAACG,GAAD,EAAMN,OAAO,CAACO,OAAD,EAAU,SAAV,CAAP,CAA4BQ,IAAlC,EAAwC,EAAxC,EAA4C;QAAEF,eAAe,EAAE;MAAnB,CAA5C,CAAX;IACH,CAFD;;IAGAJ,GAAG,CAACO,IAAJ,GAAW,YAAY;MACnB,OAAOd,GAAG,CAACI,GAAD,EAAMN,OAAO,CAACO,OAAD,EAAU,MAAV,CAAP,CAAyBQ,IAA/B,EAAqC;QAAEF,eAAe,EAAE;MAAnB,CAArC,CAAV;IACH,CAFD;;IAGA,OAAOJ,GAAP;EACH,CAVM,EAWFE,KAXE,CAWI,YAAY;IACnB,OAAO;MAAED,MAAM,EAAE;IAAV,CAAP;EACH,CAbM,CAAP;AAcH;;AACD,SAASO,YAAT,CAAsBX,GAAtB,EAA2B;EACvB,OAAOF,WAAW,CAACE,GAAD,EAAM;IACpBY,GAAG,EAAEZ,GAAG,CAACa,eAAJ,KAAwB,qBADT;IAEpBC,MAAM,EAAE,QAFY;IAGpBP,eAAe,EAAE;EAHG,CAAN,CAAlB;AAKH;;AACD,SAASQ,cAAT,CAAwBf,GAAxB,EAA6B;EACzB,OAAOH,IAAI,CAACG,GAAD,EAAM,uCAAN,EAA+C,EAA/C,EAAmD;IAAEO,eAAe,EAAE;EAAnB,CAAnD,CAAX;AACH;;AACD,SAASS,oBAAT,CAA8BhB,GAA9B,EAAmCiB,YAAnC,EAAiDC,WAAjD,EAA8D;EAC1DA,WAAW,GAAGA,WAAW,IAAIC,MAAM,CAACC,QAAP,CAAgBX,IAA7C;EACAU,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuBrB,GAAG,CAACa,eAAJ,KAAwB,8BAAxB,GACnBlB,aAAa,CAAC;IACV2B,yBAAyB,EAAE,IADjB;IAEVC,KAAK,EAAEN,YAFG;IAGVC,WAAW,EAAEA;EAHH,CAAD,CADjB;AAMH;;AAED,SAASP,YAAT,EAAuBL,UAAvB,EAAmCS,cAAnC,EAAmDhB,aAAnD,EAAkEiB,oBAAlE"},"metadata":{},"sourceType":"module"}