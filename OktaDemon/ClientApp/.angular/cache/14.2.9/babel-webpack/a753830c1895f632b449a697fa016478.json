{"ast":null,"code":"/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * \n * See the License for the specific language governing permissions and limitations under the License.\n */\nimport AuthSdkError from '../../errors/AuthSdkError.js';\n\nfunction addListener(eventTarget, name, fn) {\n  if (eventTarget.addEventListener) {\n    eventTarget.addEventListener(name, fn);\n  } else {\n    eventTarget.attachEvent('on' + name, fn);\n  }\n}\n\nfunction removeListener(eventTarget, name, fn) {\n  if (eventTarget.removeEventListener) {\n    eventTarget.removeEventListener(name, fn);\n  } else {\n    eventTarget.detachEvent('on' + name, fn);\n  }\n}\n\nfunction loadFrame(src) {\n  var iframe = document.createElement('iframe');\n  iframe.style.display = 'none';\n  iframe.src = src;\n  return document.body.appendChild(iframe);\n}\n\nfunction loadPopup(src, options) {\n  var title = options.popupTitle || 'External Identity Provider User Authentication';\n  var appearance = 'toolbar=no, scrollbars=yes, resizable=yes, ' + 'top=100, left=500, width=600, height=600';\n  return window.open(src, title, appearance);\n}\n\nfunction addPostMessageListener(sdk, timeout, state) {\n  var responseHandler;\n  var timeoutId;\n  var msgReceivedOrTimeout = new Promise(function (resolve, reject) {\n    responseHandler = function responseHandler(e) {\n      if (!e.data || e.data.state !== state) {\n        return;\n      }\n\n      if (e.origin !== sdk.getIssuerOrigin()) {\n        return reject(new AuthSdkError('The request does not match client configuration'));\n      }\n\n      resolve(e.data);\n    };\n\n    addListener(window, 'message', responseHandler);\n    timeoutId = setTimeout(function () {\n      reject(new AuthSdkError('OAuth flow timed out'));\n    }, timeout || 120000);\n  });\n  return msgReceivedOrTimeout.finally(function () {\n    clearTimeout(timeoutId);\n    removeListener(window, 'message', responseHandler);\n  });\n}\n\nexport { addListener, addPostMessageListener, loadFrame, loadPopup, removeListener };","map":{"version":3,"names":["AuthSdkError","addListener","eventTarget","name","fn","addEventListener","attachEvent","removeListener","removeEventListener","detachEvent","loadFrame","src","iframe","document","createElement","style","display","body","appendChild","loadPopup","options","title","popupTitle","appearance","window","open","addPostMessageListener","sdk","timeout","state","responseHandler","timeoutId","msgReceivedOrTimeout","Promise","resolve","reject","e","data","origin","getIssuerOrigin","setTimeout","finally","clearTimeout"],"sources":["C:/Users/Narean/source/repos/OktaDemon/OktaDemon/ClientApp/node_modules/@okta/okta-auth-js/esm/browser/oidc/util/browser.js"],"sourcesContent":["/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * \n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport AuthSdkError from '../../errors/AuthSdkError.js';\n\nfunction addListener(eventTarget, name, fn) {\n    if (eventTarget.addEventListener) {\n        eventTarget.addEventListener(name, fn);\n    }\n    else {\n        eventTarget.attachEvent('on' + name, fn);\n    }\n}\nfunction removeListener(eventTarget, name, fn) {\n    if (eventTarget.removeEventListener) {\n        eventTarget.removeEventListener(name, fn);\n    }\n    else {\n        eventTarget.detachEvent('on' + name, fn);\n    }\n}\nfunction loadFrame(src) {\n    var iframe = document.createElement('iframe');\n    iframe.style.display = 'none';\n    iframe.src = src;\n    return document.body.appendChild(iframe);\n}\nfunction loadPopup(src, options) {\n    var title = options.popupTitle || 'External Identity Provider User Authentication';\n    var appearance = 'toolbar=no, scrollbars=yes, resizable=yes, ' +\n        'top=100, left=500, width=600, height=600';\n    return window.open(src, title, appearance);\n}\nfunction addPostMessageListener(sdk, timeout, state) {\n    var responseHandler;\n    var timeoutId;\n    var msgReceivedOrTimeout = new Promise(function (resolve, reject) {\n        responseHandler = function responseHandler(e) {\n            if (!e.data || e.data.state !== state) {\n                return;\n            }\n            if (e.origin !== sdk.getIssuerOrigin()) {\n                return reject(new AuthSdkError('The request does not match client configuration'));\n            }\n            resolve(e.data);\n        };\n        addListener(window, 'message', responseHandler);\n        timeoutId = setTimeout(function () {\n            reject(new AuthSdkError('OAuth flow timed out'));\n        }, timeout || 120000);\n    });\n    return msgReceivedOrTimeout\n        .finally(function () {\n        clearTimeout(timeoutId);\n        removeListener(window, 'message', responseHandler);\n    });\n}\n\nexport { addListener, addPostMessageListener, loadFrame, loadPopup, removeListener };\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,OAAOA,YAAP,MAAyB,8BAAzB;;AAEA,SAASC,WAAT,CAAqBC,WAArB,EAAkCC,IAAlC,EAAwCC,EAAxC,EAA4C;EACxC,IAAIF,WAAW,CAACG,gBAAhB,EAAkC;IAC9BH,WAAW,CAACG,gBAAZ,CAA6BF,IAA7B,EAAmCC,EAAnC;EACH,CAFD,MAGK;IACDF,WAAW,CAACI,WAAZ,CAAwB,OAAOH,IAA/B,EAAqCC,EAArC;EACH;AACJ;;AACD,SAASG,cAAT,CAAwBL,WAAxB,EAAqCC,IAArC,EAA2CC,EAA3C,EAA+C;EAC3C,IAAIF,WAAW,CAACM,mBAAhB,EAAqC;IACjCN,WAAW,CAACM,mBAAZ,CAAgCL,IAAhC,EAAsCC,EAAtC;EACH,CAFD,MAGK;IACDF,WAAW,CAACO,WAAZ,CAAwB,OAAON,IAA/B,EAAqCC,EAArC;EACH;AACJ;;AACD,SAASM,SAAT,CAAmBC,GAAnB,EAAwB;EACpB,IAAIC,MAAM,GAAGC,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAb;EACAF,MAAM,CAACG,KAAP,CAAaC,OAAb,GAAuB,MAAvB;EACAJ,MAAM,CAACD,GAAP,GAAaA,GAAb;EACA,OAAOE,QAAQ,CAACI,IAAT,CAAcC,WAAd,CAA0BN,MAA1B,CAAP;AACH;;AACD,SAASO,SAAT,CAAmBR,GAAnB,EAAwBS,OAAxB,EAAiC;EAC7B,IAAIC,KAAK,GAAGD,OAAO,CAACE,UAAR,IAAsB,gDAAlC;EACA,IAAIC,UAAU,GAAG,gDACb,0CADJ;EAEA,OAAOC,MAAM,CAACC,IAAP,CAAYd,GAAZ,EAAiBU,KAAjB,EAAwBE,UAAxB,CAAP;AACH;;AACD,SAASG,sBAAT,CAAgCC,GAAhC,EAAqCC,OAArC,EAA8CC,KAA9C,EAAqD;EACjD,IAAIC,eAAJ;EACA,IAAIC,SAAJ;EACA,IAAIC,oBAAoB,GAAG,IAAIC,OAAJ,CAAY,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;IAC9DL,eAAe,GAAG,SAASA,eAAT,CAAyBM,CAAzB,EAA4B;MAC1C,IAAI,CAACA,CAAC,CAACC,IAAH,IAAWD,CAAC,CAACC,IAAF,CAAOR,KAAP,KAAiBA,KAAhC,EAAuC;QACnC;MACH;;MACD,IAAIO,CAAC,CAACE,MAAF,KAAaX,GAAG,CAACY,eAAJ,EAAjB,EAAwC;QACpC,OAAOJ,MAAM,CAAC,IAAInC,YAAJ,CAAiB,iDAAjB,CAAD,CAAb;MACH;;MACDkC,OAAO,CAACE,CAAC,CAACC,IAAH,CAAP;IACH,CARD;;IASApC,WAAW,CAACuB,MAAD,EAAS,SAAT,EAAoBM,eAApB,CAAX;IACAC,SAAS,GAAGS,UAAU,CAAC,YAAY;MAC/BL,MAAM,CAAC,IAAInC,YAAJ,CAAiB,sBAAjB,CAAD,CAAN;IACH,CAFqB,EAEnB4B,OAAO,IAAI,MAFQ,CAAtB;EAGH,CAd0B,CAA3B;EAeA,OAAOI,oBAAoB,CACtBS,OADE,CACM,YAAY;IACrBC,YAAY,CAACX,SAAD,CAAZ;IACAxB,cAAc,CAACiB,MAAD,EAAS,SAAT,EAAoBM,eAApB,CAAd;EACH,CAJM,CAAP;AAKH;;AAED,SAAS7B,WAAT,EAAsByB,sBAAtB,EAA8ChB,SAA9C,EAAyDS,SAAzD,EAAoEZ,cAApE"},"metadata":{},"sourceType":"module"}