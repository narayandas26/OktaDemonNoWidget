{"ast":null,"code":"/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * \n * See the License for the specific language governing permissions and limitations under the License.\n */\nimport AuthSdkError from '../errors/AuthSdkError.js';\nimport { post } from '../http/request.js';\nimport { STATE_TOKEN_KEY_NAME } from '../constants.js';\nimport 'tiny-emitter';\nimport 'js-cookie';\nimport 'cross-fetch';\nimport { addStateToken } from './util/stateToken.js';\n\nfunction transactionStatus(sdk, args) {\n  args = addStateToken(sdk, args);\n  return post(sdk, sdk.getIssuerOrigin() + '/api/v1/authn', args, {\n    withCredentials: true\n  });\n}\n\nfunction resumeTransaction(sdk, tx, args) {\n  if (!args || !args.stateToken) {\n    var stateToken = getSavedStateToken(sdk);\n\n    if (stateToken) {\n      args = {\n        stateToken: stateToken\n      };\n    } else {\n      return Promise.reject(new AuthSdkError('No transaction to resume'));\n    }\n  }\n\n  return transactionStatus(sdk, args).then(function (res) {\n    return tx.createTransaction(res);\n  });\n}\n\nfunction introspectAuthn(sdk, tx, args) {\n  if (!args || !args.stateToken) {\n    var stateToken = getSavedStateToken(sdk);\n\n    if (stateToken) {\n      args = {\n        stateToken: stateToken\n      };\n    } else {\n      return Promise.reject(new AuthSdkError('No transaction to evaluate'));\n    }\n  }\n\n  return transactionStep(sdk, args).then(function (res) {\n    return tx.createTransaction(res);\n  });\n}\n\nfunction transactionStep(sdk, args) {\n  args = addStateToken(sdk, args);\n  return post(sdk, sdk.getIssuerOrigin() + '/api/v1/authn/introspect', args, {\n    withCredentials: true\n  });\n}\n\nfunction transactionExists(sdk) {\n  return !!getSavedStateToken(sdk);\n}\n\nfunction postToTransaction(sdk, tx, url, args, options) {\n  options = Object.assign({\n    withCredentials: true\n  }, options);\n  return post(sdk, url, args, options).then(function (res) {\n    return tx.createTransaction(res);\n  });\n}\n\nfunction getSavedStateToken(sdk) {\n  const storage = sdk.options.storageUtil.storage;\n  return storage.get(STATE_TOKEN_KEY_NAME);\n}\n\nexport { getSavedStateToken, introspectAuthn, postToTransaction, resumeTransaction, transactionExists, transactionStatus, transactionStep };","map":{"version":3,"names":["AuthSdkError","post","STATE_TOKEN_KEY_NAME","addStateToken","transactionStatus","sdk","args","getIssuerOrigin","withCredentials","resumeTransaction","tx","stateToken","getSavedStateToken","Promise","reject","then","res","createTransaction","introspectAuthn","transactionStep","transactionExists","postToTransaction","url","options","Object","assign","storage","storageUtil","get"],"sources":["C:/Users/Narean/source/repos/OktaDemon/OktaDemon/ClientApp/node_modules/@okta/okta-auth-js/esm/browser/authn/api.js"],"sourcesContent":["/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * \n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport AuthSdkError from '../errors/AuthSdkError.js';\nimport { post } from '../http/request.js';\nimport { STATE_TOKEN_KEY_NAME } from '../constants.js';\nimport 'tiny-emitter';\nimport 'js-cookie';\nimport 'cross-fetch';\nimport { addStateToken } from './util/stateToken.js';\n\nfunction transactionStatus(sdk, args) {\n    args = addStateToken(sdk, args);\n    return post(sdk, sdk.getIssuerOrigin() + '/api/v1/authn', args, { withCredentials: true });\n}\nfunction resumeTransaction(sdk, tx, args) {\n    if (!args || !args.stateToken) {\n        var stateToken = getSavedStateToken(sdk);\n        if (stateToken) {\n            args = {\n                stateToken: stateToken\n            };\n        }\n        else {\n            return Promise.reject(new AuthSdkError('No transaction to resume'));\n        }\n    }\n    return transactionStatus(sdk, args)\n        .then(function (res) {\n        return tx.createTransaction(res);\n    });\n}\nfunction introspectAuthn(sdk, tx, args) {\n    if (!args || !args.stateToken) {\n        var stateToken = getSavedStateToken(sdk);\n        if (stateToken) {\n            args = {\n                stateToken: stateToken\n            };\n        }\n        else {\n            return Promise.reject(new AuthSdkError('No transaction to evaluate'));\n        }\n    }\n    return transactionStep(sdk, args)\n        .then(function (res) {\n        return tx.createTransaction(res);\n    });\n}\nfunction transactionStep(sdk, args) {\n    args = addStateToken(sdk, args);\n    return post(sdk, sdk.getIssuerOrigin() + '/api/v1/authn/introspect', args, { withCredentials: true });\n}\nfunction transactionExists(sdk) {\n    return !!getSavedStateToken(sdk);\n}\nfunction postToTransaction(sdk, tx, url, args, options) {\n    options = Object.assign({ withCredentials: true }, options);\n    return post(sdk, url, args, options)\n        .then(function (res) {\n        return tx.createTransaction(res);\n    });\n}\nfunction getSavedStateToken(sdk) {\n    const storage = sdk.options.storageUtil.storage;\n    return storage.get(STATE_TOKEN_KEY_NAME);\n}\n\nexport { getSavedStateToken, introspectAuthn, postToTransaction, resumeTransaction, transactionExists, transactionStatus, transactionStep };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}