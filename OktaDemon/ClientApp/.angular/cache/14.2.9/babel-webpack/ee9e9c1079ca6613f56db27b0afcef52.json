{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Narean/source/repos/OktaDemon/OktaDemon/ClientApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n\n/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * \n * See the License for the specific language governing permissions and limitations under the License.\n */\nimport AuthSdkError from '../errors/AuthSdkError.js';\nimport { isIDToken, isAccessToken } from './types/Token.js';\nimport { getWithoutPrompt } from './getWithoutPrompt.js';\nimport { renewTokensWithRefresh } from './renewTokensWithRefresh.js';\n\nfunction throwInvalidTokenError() {\n  throw new AuthSdkError('Renew must be passed a token with an array of scopes and an accessToken or idToken');\n}\n\nfunction getSingleToken(originalToken, tokens) {\n  if (isIDToken(originalToken)) {\n    return tokens.idToken;\n  }\n\n  if (isAccessToken(originalToken)) {\n    return tokens.accessToken;\n  }\n\n  throwInvalidTokenError();\n}\n\nfunction renewToken(_x, _x2) {\n  return _renewToken.apply(this, arguments);\n}\n\nfunction _renewToken() {\n  _renewToken = _asyncToGenerator(function* (sdk, token) {\n    if (!isIDToken(token) && !isAccessToken(token)) {\n      throwInvalidTokenError();\n    }\n\n    let tokens = sdk.tokenManager.getTokensSync();\n\n    if (tokens.refreshToken) {\n      tokens = yield renewTokensWithRefresh(sdk, {\n        scopes: token.scopes\n      }, tokens.refreshToken);\n      return getSingleToken(token, tokens);\n    }\n\n    var responseType;\n\n    if (sdk.options.pkce) {\n      responseType = 'code';\n    } else if (isAccessToken(token)) {\n      responseType = 'token';\n    } else {\n      responseType = 'id_token';\n    }\n\n    const {\n      scopes,\n      authorizeUrl,\n      userinfoUrl,\n      issuer\n    } = token;\n    return getWithoutPrompt(sdk, {\n      responseType,\n      scopes,\n      authorizeUrl,\n      userinfoUrl,\n      issuer\n    }).then(function (res) {\n      return getSingleToken(token, res.tokens);\n    });\n  });\n  return _renewToken.apply(this, arguments);\n}\n\nexport { renewToken };","map":{"version":3,"names":["AuthSdkError","isIDToken","isAccessToken","getWithoutPrompt","renewTokensWithRefresh","throwInvalidTokenError","getSingleToken","originalToken","tokens","idToken","accessToken","renewToken","sdk","token","tokenManager","getTokensSync","refreshToken","scopes","responseType","options","pkce","authorizeUrl","userinfoUrl","issuer","then","res"],"sources":["C:/Users/Narean/source/repos/OktaDemon/OktaDemon/ClientApp/node_modules/@okta/okta-auth-js/esm/browser/oidc/renewToken.js"],"sourcesContent":["/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * \n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport AuthSdkError from '../errors/AuthSdkError.js';\nimport { isIDToken, isAccessToken } from './types/Token.js';\nimport { getWithoutPrompt } from './getWithoutPrompt.js';\nimport { renewTokensWithRefresh } from './renewTokensWithRefresh.js';\n\nfunction throwInvalidTokenError() {\n    throw new AuthSdkError('Renew must be passed a token with an array of scopes and an accessToken or idToken');\n}\nfunction getSingleToken(originalToken, tokens) {\n    if (isIDToken(originalToken)) {\n        return tokens.idToken;\n    }\n    if (isAccessToken(originalToken)) {\n        return tokens.accessToken;\n    }\n    throwInvalidTokenError();\n}\nasync function renewToken(sdk, token) {\n    if (!isIDToken(token) && !isAccessToken(token)) {\n        throwInvalidTokenError();\n    }\n    let tokens = sdk.tokenManager.getTokensSync();\n    if (tokens.refreshToken) {\n        tokens = await renewTokensWithRefresh(sdk, {\n            scopes: token.scopes,\n        }, tokens.refreshToken);\n        return getSingleToken(token, tokens);\n    }\n    var responseType;\n    if (sdk.options.pkce) {\n        responseType = 'code';\n    }\n    else if (isAccessToken(token)) {\n        responseType = 'token';\n    }\n    else {\n        responseType = 'id_token';\n    }\n    const { scopes, authorizeUrl, userinfoUrl, issuer } = token;\n    return getWithoutPrompt(sdk, {\n        responseType,\n        scopes,\n        authorizeUrl,\n        userinfoUrl,\n        issuer\n    })\n        .then(function (res) {\n        return getSingleToken(token, res.tokens);\n    });\n}\n\nexport { renewToken };\n"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,OAAOA,YAAP,MAAyB,2BAAzB;AACA,SAASC,SAAT,EAAoBC,aAApB,QAAyC,kBAAzC;AACA,SAASC,gBAAT,QAAiC,uBAAjC;AACA,SAASC,sBAAT,QAAuC,6BAAvC;;AAEA,SAASC,sBAAT,GAAkC;EAC9B,MAAM,IAAIL,YAAJ,CAAiB,oFAAjB,CAAN;AACH;;AACD,SAASM,cAAT,CAAwBC,aAAxB,EAAuCC,MAAvC,EAA+C;EAC3C,IAAIP,SAAS,CAACM,aAAD,CAAb,EAA8B;IAC1B,OAAOC,MAAM,CAACC,OAAd;EACH;;EACD,IAAIP,aAAa,CAACK,aAAD,CAAjB,EAAkC;IAC9B,OAAOC,MAAM,CAACE,WAAd;EACH;;EACDL,sBAAsB;AACzB;;SACcM,U;;;;;kCAAf,WAA0BC,GAA1B,EAA+BC,KAA/B,EAAsC;IAClC,IAAI,CAACZ,SAAS,CAACY,KAAD,CAAV,IAAqB,CAACX,aAAa,CAACW,KAAD,CAAvC,EAAgD;MAC5CR,sBAAsB;IACzB;;IACD,IAAIG,MAAM,GAAGI,GAAG,CAACE,YAAJ,CAAiBC,aAAjB,EAAb;;IACA,IAAIP,MAAM,CAACQ,YAAX,EAAyB;MACrBR,MAAM,SAASJ,sBAAsB,CAACQ,GAAD,EAAM;QACvCK,MAAM,EAAEJ,KAAK,CAACI;MADyB,CAAN,EAElCT,MAAM,CAACQ,YAF2B,CAArC;MAGA,OAAOV,cAAc,CAACO,KAAD,EAAQL,MAAR,CAArB;IACH;;IACD,IAAIU,YAAJ;;IACA,IAAIN,GAAG,CAACO,OAAJ,CAAYC,IAAhB,EAAsB;MAClBF,YAAY,GAAG,MAAf;IACH,CAFD,MAGK,IAAIhB,aAAa,CAACW,KAAD,CAAjB,EAA0B;MAC3BK,YAAY,GAAG,OAAf;IACH,CAFI,MAGA;MACDA,YAAY,GAAG,UAAf;IACH;;IACD,MAAM;MAAED,MAAF;MAAUI,YAAV;MAAwBC,WAAxB;MAAqCC;IAArC,IAAgDV,KAAtD;IACA,OAAOV,gBAAgB,CAACS,GAAD,EAAM;MACzBM,YADyB;MAEzBD,MAFyB;MAGzBI,YAHyB;MAIzBC,WAJyB;MAKzBC;IALyB,CAAN,CAAhB,CAOFC,IAPE,CAOG,UAAUC,GAAV,EAAe;MACrB,OAAOnB,cAAc,CAACO,KAAD,EAAQY,GAAG,CAACjB,MAAZ,CAArB;IACH,CATM,CAAP;EAUH,C;;;;AAED,SAASG,UAAT"},"metadata":{},"sourceType":"module"}